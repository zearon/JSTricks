{
  "timestamp": "20160218-150553020",
  "metadata": "{\n  \"include\": [],\n  \n  \"plugins\": [\n    {\"enabled\":true, \"index\":0, \"info\":\"Adjust Height for Care-Your-Eyes extension\",\n     \t\t\"conditions\": [ {\"selector\":\"html.cye-enabled\", \"delay\": 500} ], \n     \t\t\"action\":{\"script\":\"Plugins\", \"topFrame\":true, \"code\":\"JSTricks_plugins.adjustHeightForCYE(0);\"} \n    },\n    {\"enabled\":true, \"index\":1, \"info\":\"Sample plugin for *.baidu.com\",\n    \t\t\"conditions\": [ {\"url\":[\"\\\\.baidu\\\\.com\"]} ], \n     \t\t\"action\":{\"script\":\"PluginDemo\", \"topFrame\":false, \"code\":\"\"} \n    },\n    {\"enabled\":false, \"index\":2, \"info\":\"Sample plugin for css selector\",\n     \t\t\"conditions\": [ {\"selector\":\"body.wiki-lemma.normal\", \"delay\": 500} ], \n     \t\t\"action\":{\"script\":\"Plugins\", \"topFrame\":false, \"code\":\"plugins.test();\"} \n    }\n \t],\n    \n  \"active_module\": \"\",\n  \n  \"modules\":[\n    {\"title\": \"Common\", \"moduleName\": \"#Common\", \"objName\": \"common\", \"addRequires\": false, \"commands\":[\n      {\"title\": \"Require jQuery\", \"loadModule\":\"true\", \"moduleName\":\"jquery\", \"objName\":\"$\", \"addRequires\": false,\n       \"tooltip\":\"Add a dependency to jQuery as needed and import it as a symbol $ in the script.\"\n      },\n      \n      {\"title\": \"Book Mode\", \n       \"code\": \"//Book Mode\\n common.prefetch('a:contains(\\\\'下一\\\\'):eq(0)');\\n if(common.urlMatches('/html/*/*/index.html$', 'Wildcard', 'pathname')) {\\n $('body').addClass('tob');\\n common.addCssStyle('.tob a:visited { color: red; }');\\n }\\n\"\n      },\n      \n      {\"title\": \"Txt Mode\", \"tooltip\":\"Local Txt file mode\",\n       \"code\": \"common.txtMode(false, 'Ctrl-Q', '17:00:00', '08:00:00');\"\n      },\n      \n      {\"title\": \"Replace Double <br>\", \n       \"code\": \"  common.replaceText('#contents', /<br>\\\\s*<br>/g, '<br>');\\n\"\n      },\n      \n      {\"title\": \"Enable Rightclick\", \"funcname\": \"enableRightClick\", \"args\": [\n      ]},\n      \n      {\"title\": \"URL Matches\", \"funcname\": \"urlMatches\", \"statement\":\"if\", \"args\": [\n        {\"name\": \"Pattern\", \"len\":59, \"type\":\"url\"},\n        {\"name\": \" type\", \"type\":\"select\", \"options\":[\"Wildcard\", \"Regexp\", \"Raw Regexp\"]},\n        {\"name\": \" part\", \"type\":\"select\", \"options\":[\"pathname\", \"href\", \"host\", \"hostname\", \"port\", \"protocol\"]}\n      ]},\n      \n      {\"title\": \"Replace Text\", \"funcname\": \"replaceText\", \"args\": [\n        {\"name\": \"Target\", \"len\":15, \"defaultValue\":\"#contents\", \"type\":\"domnode\"},\n        {\"name\": \"Replace\", \"len\":8, \"defaultValue\":\"/regex/g\", \"type\":\"raw\"},\n        {\"name\": \"with\", \"len\":7, \"defaultValue\":\"\"},\n        {\"name\": \"Method\", \"len\":9, \"type\":\"select\", \"options\":[\"html()\", \"innerHTML\"]}\n      ]},\n      \n      {\"title\": \"Prefetch Link\", \"funcname\": \"prefetch\",  \"args\": [\n        {\"name\": \"Target\", \"len\":56, \"defaultValue\":\"a:contains(''):eq(0)\", \"type\":\"domnode\"}\n      ]},\n      \n      {\"title\": \"Manipulate Node\", \"funcname\": \"manipulateNode\",  \"args\": [\n        {\"name\": \"Target\", \"len\":44, \"defaultValue\":\"a:contains(''):eq(0)\", \"type\":\"domnode\"},\n        {\"name\": \"\", \"len\":8, \"type\":\"select\", \"options\":[\"hide\", \"remove\"]}\n      ]},\n      \n      {\"title\": \"Add Thousand seperators\", \"funcname\": \"addThousands\", \"args\": [\n        {\"name\": \"Target\", \"len\":46, \"defaultValue\":\"td\", \"type\":\"domnode\"}\n      ]},\n      \n      {\"title\": \"Unbind Event\", \"funcname\": \"unbindEvent\", \"args\": [\n        {\"name\": \"Target\", \"len\":40, \"defaultValue\":\"#contents\", \"type\":\"domnode\"},\n        {\"name\": \"Event\", \"len\":10, \"defaultValue\":\"click\"}\n      ]},\n      \n      {\"title\": \"Mark table columns\", \"funcname\": \"markTableColumn\", \"args\": [\n        {\"name\": \"Table\", \"len\":30, \"defaultValue\":\"table\", \"type\":\"domnode\"},\n        {\"name\": \"columns from index\", \"len\":2, \"defaultValue\":\"0\", \"type\":\"raw\"},\n        {\"name\": \"to\", \"len\":2, \"defaultValue\":\"0\", \"type\":\"raw\"},\n        {\"name\": \"class name\", \"len\":16, \"defaultValue\":\"\"}\n      ]}\n    ]},\n    \n    \n    {\"title\": \"Other Plugins\", \"moduleName\": \"#Plugins\", \"objName\": \"plugins\", \"addRequires\": true, \"commands\":[      \n      {\"title\": \"Adjust height\", \"funcname\": \"adjustHeightForEyesProtectExt\", \n       \"tooltip\":\"<a target='_blank' href='https://chrome.google.com/webstore/detail/care-your-eyes/fidmpnedniahpnkeomejhnepmbdamlhl'><b>Care-your-eyes</b></a> extension causes the height of some webpages becomes too big. This function fixes this problem.\", \n       \"args\": [\n      ]}\n    ]},\n    \n    \n    {\"title\": \"Dev\", \"moduleName\": \"#Dev\", \"objName\": \"dev\", \"addRequires\": false, \"commands\":[      \n      \n      {\"title\": \"Inject jQuery\", \"run\":\"true\", \"moduleName\":\"#DEBUG\", \"objName\":\"debug\",\n       \"tooltip\":\"Inject a script node in document head for jQuery.\",\n       \"code\": \"debug.addScriptNode('https://code.jquery.com/jquery-1.11.3.min.js');\\n\"\n      },\n      \n      {\"title\": \"Set Text of CodeMirror Editor\", \"funcname\": \"setCodeMirrorText\", \n       \"tooltip\":\"Set the text of a CodeMirror editor.\", \n       \"args\": [\n        {\"name\": \"Editor Selector\", \"len\":9, \"defaultValue\":\".CodeMirror\"},\n        {\"name\": \"Index\", \"len\":2, \"defaultValue\":\"0\", \"type\":\"raw\"},\n        {\"name\": \"Text\", \"defaultValue\":\"Sample Code\", \"len\":20}\n      ]}\n    ]},\n    \n    \n    {\"title\": \"DEBUG\", \"moduleName\": \"#DEBUG\", \"objName\": \"debug\", \"addRequires\": false, \"commands\":[\n      \n      {\"title\": \"Require jQuery\", \"loadModule\":\"true\", \"moduleName\":\"jquery\", \"objName\":\"$\", \"addRequires\": false,\n       \"tooltip\":\"Add a dependency to jQuery as needed and import it as a symbol $ in the script.\"\n      },\n      \n      {\"title\": \"Require jQuery UI\", \"loadModule\":\"true\", \"moduleName\":\"jquery-ui\", \"objName\":\"jui\", \"addRequires\": false,\n       \"tooltip\":\"Add a dependency to jQuery UI as needed and import it as a symbol jui in the script.\"\n      },\n      \n      {\"title\": \"Require Message Box\", \"loadModule\":\"true\", \"moduleName\":\"msgbox\", \"objName\":\"log\", \"addRequires\": false,\n       \"tooltip\":\"Add a dependency to jQuery as needed and import it as a symbol $ in the script.\"\n      },\n      \n      {\"title\": \"Require Selection Box\", \"loadModule\":\"true\", \"moduleName\":\"selectbox\", \"objName\":\"SelectionBox\", \"addRequires\": false,\n       \"tooltip\":\"Add a dependency to jQuery as needed and import it as a symbol $ in the script.\"\n      },\n      \n      {\"title\": \"Show Popup Window\", \"run\":\"true\", \"funcname\": \"showPopup\", \"args\": [\n      ]},\n      \n      {\"title\": \"Reload BG-Page\", \"run\":\"true\", \"funcname\": \"reloadBackroundPage\", \"args\": [\n      ]},\n      \n      {\"title\": \"Print Cached Modules\", \"run\":\"true\", \"funcname\": \"showSeaJsCache\", \n       \"tooltip\":\"Print all cached module in module manager Sea.js in console.\",\n       \"args\": [\n      ]},\n      \n      {\"title\": \"Print Messenger\", \"run\":\"true\", \"funcname\": \"viewMessenger\", \"args\": [\n      ]},\n      \n      {\"title\": \"Import Common&LibBase\", \"run\":\"true\", \"code\": \"debug.importContentScript('#LibBase, #Common');\",\n       \"tooltip\":\"Import content script Common and LibBase and export the exported symbols to global variable window.\"\n      },\n      \n      {\"title\": \"Reinject File\", \"funcname\": \"reinjectFile\", \"args\": [\n        {\"name\": \"File\", \"len\":40, \"defaultValue\":\"usrlib/nodeSelector.js\"}\n      ]},\n      \n      {\"title\": \"Inject Content Script as Script Node\", \"funcname\": \"injectContentScriptAsScriptNode\", \"args\": [\n        {\"name\": \"Content Script Name\", \"len\":30, \"defaultValue\":\"Test\"}\n      ]},\n      \n      {\"title\": \"Import Content Script and export symbol\", \"funcname\": \"importContentScript\", \"args\": [\n        {\"name\": \"csNames\", \"len\":34, \"defaultValue\":\"#LibBase, \"}],\n       \"tooltip\":\"Import content script and export the exported symbols to global variable window.<br/>csNames is a comma seperated string.\"\n      }\n    ]}\n  ],\n  \n  \n  \n  \n\n\n\n\n\n\n\n\n\n  \"builtinLibs\": [\n  \t\"CodeMirror\",\"Coder\",\"Common\",\"ContextMenuDemo\",\"DEBUG\",\"Dev\",\"HightlightSelector\",\n    \"InjectAsScriptNode_Demo\",\"InjectAsScriptNode_Injected\",\"LibBase\",\"Messenger\",\"OpenLinks\",\n    \"Plugins\",\"QRCodeDecode\",\"QRCodeEncode\",\"dfdf\",\"PluginDemo\",\"localStorage\"\n  ],\n    \n  \"seajs.config\": {\n    \"paths\": {\n      \"mootools\": \"https://ajax.googleapis.com/ajax/libs/mootools/1.6.0\"\n    },\n    \"alias\": {\n      \"jquery\": \"lib/jquery[AMD]\",\n      \"jquery-ui\": \"lib/jquery-ui[AMD]\",\n      \"ready\": \"ready[AMD]\",\n      \"msgbox\": \"msgbox\",\n      \"selectbox\": \"selectionBox\",\n      \"mootools\": \"mootools/mootools[Raw]\"\n    }\n  }\n\n}",
  "assets": {
    "cs-Coder": "20160202-224000201",
    "cs-Common": "20160218-150550179",
    "cs-ContextMenuDemo": "20160202-224000201",
    "cs-DEBUG": "20160218-121341446",
    "cs-Dev": "20160202-224000202",
    "cs-HightlightSelector": "20160202-234546486",
    "cs-InjectAsScriptNode_Demo": "20160202-224000202",
    "cs-InjectAsScriptNode_Injected": "20160202-224000202",
    "cs-LibBase": "20160218-142813888",
    "cs-Messenger": "20160202-224000202",
    "cs-OpenLinks": "20160202-224000203",
    "cs-PluginDemo": "20160212-175320233",
    "cs-Plugins": "20160203-00020076",
    "cs-QRCodeDecode": "20160202-224000203",
    "cs-QRCodeEncode": "20160202-224000203",
    "cs-localStorage": "20160202-224000204",
    "dss-Main": "20160202-224000204"
  },
  "assetStorage": {
    "cs-Coder": {
      "group": "Lib",
      "title": "Coder",
      "sfile": "",
      "script": "define(\"#Coder\", [], function(require, exports, module) {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              \n  function Coder() {\n    //this.config = this.getConfig(\"Coder\");\n  }\n  \n  //MD5函数\n  var md5 = (function() {\n    var hexcase=0;var b64pad=\"\";function hex_md5(s){return rstr2hex(rstr_md5(str2rstr_utf8(s)));}function b64_md5(s){return rstr2b64(rstr_md5(str2rstr_utf8(s)));}function any_md5(s,e){return rstr2any(rstr_md5(str2rstr_utf8(s)),e);}function hex_hmac_md5(k,d){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)));}function b64_hmac_md5(k,d){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)));}function any_hmac_md5(k,d,e){return rstr2any(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)),e);}function md5_vm_test(){return hex_md5(\"abc\").toLowerCase()==\"900150983cd24fb0d6963f7d28e17f72\";}function rstr_md5(s){return binl2rstr(binl_md5(rstr2binl(s),s.length*8));}function rstr_hmac_md5(key,data){var bkey=rstr2binl(key);if(bkey.length>16)bkey=binl_md5(bkey,key.length*8);var ipad=Array(16),opad=Array(16);for(var i=0;i<16;i++){ipad[i]=bkey[i]^0x36363636;opad[i]=bkey[i]^0x5C5C5C5C;}var hash=binl_md5(ipad.concat(rstr2binl(data)),512+data.length*8);return binl2rstr(binl_md5(opad.concat(hash),512+128));}function rstr2hex(input){try{hexcase;}catch(e){hexcase=0;}var hex_tab=hexcase?\"0123456789ABCDEF\":\"0123456789abcdef\";var output=\"\";var x;for(var i=0;i<input.length;i++){x=input.charCodeAt(i);output+=hex_tab.charAt((x>>>4)&0x0F)+hex_tab.charAt(x&0x0F);}return output;}function rstr2b64(input){try{b64pad;}catch(e){b64pad='';}var tab=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";var output=\"\";var len=input.length;for(var i=0;i<len;i+=3){var triplet=(input.charCodeAt(i)<<16)|(i+1<len?input.charCodeAt(i+1)<<8:0)|(i+2<len?input.charCodeAt(i+2):0);for(var j=0;j<4;j++){if(i*8+j*6>input.length*8)output+=b64pad;else output+=tab.charAt((triplet>>>6*(3-j))&0x3F);}}return output;}function rstr2any(input,encoding){var divisor=encoding.length;var i,j,q,x,quotient;var dividend=Array(Math.ceil(input.length/2));for(i=0;i<dividend.length;i++){dividend[i]=(input.charCodeAt(i*2)<<8)|input.charCodeAt(i*2+1);}var full_length=Math.ceil(input.length*8/(Math.log(encoding.length)/Math.log(2)));var remainders=Array(full_length);for(j=0;j<full_length;j++){quotient=Array();x=0;for(i=0;i<dividend.length;i++){x=(x<<16)+dividend[i];q=Math.floor(x/divisor);x-=q*divisor;if(quotient.length>0||q>0)quotient[quotient.length]=q;}remainders[j]=x;dividend=quotient;}var output=\"\";for(i=remainders.length-1;i>=0;i--)output+=encoding.charAt(remainders[i]);return output;}function str2rstr_utf8(input){var output=\"\";var i=-1;var x,y;while(++i<input.length){x=input.charCodeAt(i);y=i+1<input.length?input.charCodeAt(i+1):0;if(0xD800<=x&&x<=0xDBFF&&0xDC00<=y&&y<=0xDFFF){x=0x10000+((x&0x03FF)<<10)+(y&0x03FF);i++;}if(x<=0x7F)output+=String.fromCharCode(x);else if(x<=0x7FF)output+=String.fromCharCode(0xC0|((x>>>6)&0x1F),0x80|(x&0x3F));else if(x<=0xFFFF)output+=String.fromCharCode(0xE0|((x>>>12)&0x0F),0x80|((x>>>6)&0x3F),0x80|(x&0x3F));else if(x<=0x1FFFFF)output+=String.fromCharCode(0xF0|((x>>>18)&0x07),0x80|((x>>>12)&0x3F),0x80|((x>>>6)&0x3F),0x80|(x&0x3F));}return output;}function str2rstr_utf16le(input){var output=\"\";for(var i=0;i<input.length;i++)output+=String.fromCharCode(input.charCodeAt(i)&0xFF,(input.charCodeAt(i)>>>8)&0xFF);return output;}function str2rstr_utf16be(input){var output=\"\";for(var i=0;i<input.length;i++)output+=String.fromCharCode((input.charCodeAt(i)>>>8)&0xFF,input.charCodeAt(i)&0xFF);return output;}function rstr2binl(input){var output=Array(input.length>>2);var i;for(i=0;i<output.length;i++)output[i]=0;for(i=0;i<input.length*8;i+=8)output[i>>5]|=(input.charCodeAt(i/8)&0xFF)<<(i%32);return output;}function binl2rstr(input){var output=\"\";for(var i=0;i<input.length*32;i+=8)output+=String.fromCharCode((input[i>>5]>>>(i%32))&0xFF);return output;}function binl_md5(x,len){x[len>>5]|=0x80<<((len)%32);x[(((len+64)>>>9)<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i+0],20,-373897302);a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i+0],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i+0],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd);}return Array(a,b,c,d);}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b);}function md5_ff(a,b,c,d,x,s,t){return md5_cmn((b&c)|((~b)&d),a,b,x,s,t);}function md5_gg(a,b,c,d,x,s,t){return md5_cmn((b&d)|(c&(~d)),a,b,x,s,t);}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t);}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|(~d)),a,b,x,s,t);}function safe_add(x,y){var lsw=(x&0xFFFF)+(y&0xFFFF);var msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&0xFFFF);}function bit_rol(num,cnt){return(num<<cnt)|(num>>>(32-cnt));}\n    return {hex_md5, b64_md5};\n  }) ();                                                \n    \n  Coder.prototype.md5_hex = md5.hex_md5;\n  Coder.prototype.md5_base64 = md5.b64_md5;\n  \n  return new Coder();\n});\n\n// Unit test\nrun([\"#Coder\"], function(obj) {\n  console.log(\"MD5 of 'Hello' in hex is\", obj.md5_hex(\"Hello\"));\n  console.log(\"MD5 of 'Hello' in base 64 is\", obj.md5_base64(\"Hello\"));\n});\n\n",
      "id": "cs-Coder",
      "type": "cs",
      "name": "Coder",
      "timestamp": "20160202-224000201",
      "importOnce": false,
      "autostart": false
    },
    "cs-Common": {
      "name": "Common",
      "type": "cs",
      "index": "22",
      "group": "Module",
      "title": "Common",
      "sfile": "",
      "script": "define(\"#Common\", [\"jquery\", \"#LibBase\", \"#Messenger\"], function(require, exports, module) {\n  var $ = require(\"jquery\");\n  var libBase = require(\"#LibBase\");\n  var msg = require(\"#Messenger\");\n  \n  function Common() {\n    this.init();\n  }\n  Common.prototype = Object.create(libBase);\n  Common.prototype.constructor = Common;\n    \n  // Prototypes for Common\n  Common.prototype.prefetch = function (target) {\n    //var next = $('a:contains(\"下一\"):eq(0)')[0];\n    var next = $(target)[0];\n    if (next) {\n      var link = next.href;\n      var href = $(next).attr('href');\n      var prefetch1 = '<link rel=\"prefetch\" href=\"' + link + '\" />'; // For Firefox browser\n      var prefetch2 = '<link rel=\"prerender\" href=\"' + link + '\" />'; // For Google Chrome browser\n      $('head').append(prefetch1);\n      $('head').append(prefetch2);\n      var node = $(\"a[href='\"+href+\"']\");\n      var style = node.attr(\"style\");\n      if (style === 'undefined')\n        style = \"\";\n      if ($(next).children().length > 0) {\n        style += \"background-color: rgba(247,223,29,1);\";\n      } else {\n        style += `color: blue; \n                color: blue;\n                border: 1px solid rgba(124,122,12,1);\n                /* cursor: pointer; */\n                background-color: rgba(247,223,29,1);\n                background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fcf1b4), color-stop(50%,#fce448), color-stop(51%,#f4d300), color-stop(100%,#fbec8b));\n                box-shadow: rgba(0,0,0,0.2) 0 -1px 2px inset,rgba(255,255,255,1) 0 1px 2px inset;\n                /* padding: 3px 10px; */\n                text-shadow: rgba(255,255,255,0.6) 0 1px;`;\n    }\n      \n      node.attr(\"style\", style);\n      this.showMsg(\"Prefetch nodes for \" + target + \" have been inserted.\");\n    } else {\n      this.showMsg(\"Target '\" + target + \"' does not matche any node.\");\n    }\n  };\n  \n  Common.prototype.defaultPrefetch = function(target1, target2) {\n    this.prefetch(target1);\n    this.prefetch(target2);\n  };\n  \n  /**\n   * @param nightMode.\n   * @param switchModeHotkey. If it is set to undefined or null, then the default value Ctrl-Q is used.\n   * @param nightModeStartTime. Time string \n   * @param nightModeEndTime.\n   */\n  Common.prototype.txtMode = function(nightMode, switchModeHotkey, nightModeStartTime, nightModeEndTime) {\n  \tvar self = this;\n    var body = document.body;\n    this.appendStyle(\"common-txtMode\", \"body {font-size:18px; padding-left:2px;}\");\n    \n    self.state.txtMode = {};\n    \n    if (switchModeHotkey == undefined)\n      switchModeHotkey = \"Ctrl-Q\";\n    this.registerHotkey(document, switchModeHotkey, false, _switchModeOnKeypress);\n    \n    // Switch to nightMode according to nightMode argument\n    if (nightMode || nightMode == undefined) {\n      _switchOnNightMode();\n    }\n    \n    // Setup automatic switching between dat/night modes\n    if (nightModeStartTime != undefined && nightModeEndTime != undefined) {\n      self.state.txtMode.nightModeStartTime = nightModeStartTime;\n      self.state.txtMode.nightModeEndTime = nightModeEndTime;\n      self.state.txtMode.switchTimer = setInterval(_switchModeOnTimer, 10*60*1000); //re-check every 10 minutes\n      _switchModeOnTimer();\n    }\n    \n    this.showMsg(\"Txt mode is switched on. Press \" + switchModeHotkey + \" to switch between day mode and night mode.\");\n    \n    function _switchOnNightMode() {\n      self.state.txtMode.nightmode = true;\n    \tself.appendStyle(\"common-txtMode-nightmode\", \n                       \"body {color:rgb(184,184,184); background-color:rgb(59,59,59);}\");\n      \n    \tself.showMsg(\"TxtMode - Switch to night mode.\");\n    }\n    function _switchOnDayMode() {\n      self.state.txtMode.nightmode = false;\n    \tself.appendStyle(\"common-txtMode-nightmode\", \n                       \"body {background-color:#C8E4CB;}\");\n      \n    \tself.showMsg(\"TxtMode - Switch to day mode.\");\n    }\n    function _switchModeOnKeypress() {\n      if (self.state.txtMode.nightmode) {\n        _switchOnDayMode();\n      } else {\n        _switchOnNightMode();\n      }\n    }\n    function _switchModeOnTimer() {\n      if (self.state.txtMode.switchTimer) {\n      \tvar now = UTIL.Date.Format(new Date(), \"hh:mm:ss\");\n        console.log(\"now\", now, \"start\", self.state.txtMode.nightModeStartTime, \"end\", self.state.txtMode.nightModeEndTime);\n        if (now >= self.state.txtMode.nightModeStartTime || now <= self.state.txtMode.nightModeEndTime) {\n          _switchOnNightMode();\n        } else {\n          _switchOnDayMode();\n        }\n      }\n    }\n  };\n  \n  // part is one of [\"pathname\", \"href\", \"host\", \"hostname\", \"port\", \"protocol\"];\n  Common.prototype.urlMatches = function(url, type, part) {\n    var urlPatternStr = url;\n    if (type == \"Wildcard\") {\n      urlPatternStr = urlPatternStr.replace(/\\./g, \"\\\\.\").replace(/\\?/g, \"\\\\?\").replace(/\\+/g, \"\\\\+\").replace(/\\=/g, \"\\\\=\").replace(/\\&/g, \"\\\\&\").replace(/\\*/g, \".*\");\n    } else if (type == \"Regexp\") {\n      urlPatternStr = urlPatternStr.replace(/\\./g, \"\\\\.\").replace(/\\=/g, \"\\\\=\").replace(/\\&/g, \"\\\\&\");\n    } else if (type == \"Raw Regexp\") {\n    }\n    var urlPattern = new RegExp(urlPatternStr);\n    var urlPart = part ? location[part] : location.pathname;\n    var result = urlPattern.test(urlPart);\n    var status = result ? \"<font color='red'>PASSED</font>\" : \"FAILED\";\n    this.showMsg(`${type} test ${status} for '${urlPatternStr}'`);\n    return result;\n  };\n  \n  Common.prototype.manipulateNode = function (target, operation) {\n    var node = $(target);\n    if (operation === \"remove\") {\n      node.remove();\n    } else if (operation === \"hide\") {\n      node.hide();\n    }\n    this.triggerCustomEvent(\"Height_Updated\", \"\");\n    this.showMsg(operation, target, \"OK\");\n  };\n  \n  Common.prototype.replaceText = function (target, pattern, replacement, method) {\n    var node = $(target);\n    var text = node.html();\n    if (!text)\n      return;\n    \n    text = text.replace(pattern, replacement);\n    \n    if (!method || method == 1 || method == \"html()\") {\n      node.html(text);\n    } else if (method == 2 || method == \"innerHTML\") {\n      node[0].innerHTML = text;\n    }\n    var msg = \"Text replacement for \" + target + \" [\"+pattern+\" --> \"+replacement+\"] is done.\";\n    this.showMsg(msg, true);\n  };\n  \n  Common.prototype.addThousands = function (selector) {\n    var pattern = /(\\d+)(\\d{3})(\\D|$)/g;\n    function _replacement(str, sub1, sub2, sub3, n) {\n      pattern = /(\\d+)(\\d{3})(\\D|$)/g;\n      return sub1.replace(pattern, _replacement) + ',' + sub2 + sub3;\n    }\n    function _replaceNum(index, ele) {\n      var text = ele.innerText;\n      ele.innerText = text.replace(pattern, _replacement);\n    }\n    \n    $(selector).each(_replaceNum);\n    \n    this.showMsg(\"Thousands seperators for \" + selector + \" have been added.\");\n  };\n  \n  Common.prototype.addCssStyle = function(styles) {\n    var data = [{code:`AppendStyleNodeToDom_____(\"common-addedCssStyle\", decodeURIComponent(\"${encodeURIComponent(styles)}\"));`}];\n    var msg = {method:\"ExecuteJsCodeOrFile\", data:data};\n    chrome.runtime.sendMessage(msg);\n  };\n  \n  Common.prototype.markTableColumn = function(table, \n                                    columnIndexStart, columnIndexTo, className) {\n    var index1 = columnIndexStart - 1;\n    var index2 = columnIndexTo + 1;\n    $(table + \" tr\").find(`td:eq(${columnIndexStart})`).addClass(className);\n    $(table + \" tr\").find(`td:lt(${index2}):gt(${index1})`).addClass(className);\n    \n    this.showMsg(`[Novel] Mark columns [${columnIndexStart}-${columnIndexTo}] as \"${className}\" for table ${table}. `);\n  };\n  \n  Common.prototype.unbindEvent = function (target, e) {\n      $(target).unbind(e);\n  };\n  \n  Common.prototype.enableRightClick = function() {\n    // call __JSTricks_Injected_ method defined in injected/injected.js\n    //window.postMessage({ type: \"JST-injected-callMethod\", func: \"enableRightClick\" }, \"*\");\n    msg.invokeFunction(\"__JSTricks_Injected_enableRightClick\");\n    \n    this.showMsg(`Rightclick is enabled.`);\n  };\n  \n  // end of Common prototypes\n  \n  return new Common();\n});\n",
      "importOnce": false,
      "timestamp": "20160218-150550179",
      "id": "cs-Common"
    },
    "cs-ContextMenuDemo": {
      "group": "Demo",
      "title": "Context Menu Demo",
      "sfile": "",
      "script": "// contextInfo is a variable injected which contains infomation about\n// the clicked context menu item and the tab on which the context menu\n// is activated.\n\nconsole.log(\"-------------------------------\");\nconsole.log(\"The information of clicked context menu: \", INFO.contextMenuInfo);\nconsole.log(\"The selection of document: \", document.getSelection());\n\nalert(\"Several data is printed in Console in Dev Tool.\");",
      "id": "cs-ContextMenuDemo",
      "type": "cs",
      "name": "ContextMenuDemo",
      "timestamp": "20160202-224000201",
      "importOnce": false,
      "autostart": false
    },
    "cs-DEBUG": {
      "name": "DEBUG",
      "type": "cs",
      "index": "24",
      "group": "Module",
      "title": "DEBUG",
      "sfile": "",
      "script": "/* globals msgbox*/\n(function() {\n  var msgbox = window.msgbox.clone(\"DEBUG\");\n  var DEBUG = {};\n  \n  DEBUG.showPopup = function() {\n    chrome.runtime.sendMessage({tabid: INFO.tabid, method:\"InjectPopupPage\", data:{hideDialog: false}});\n  };\n    \n  DEBUG.reinjectFile = function(file) {\n    chrome.runtime.sendMessage({tabid: INFO.tabid, method:\"ExecuteJsCodeOrFile\", data:[{file: file}]});\n  };\n    \n  DEBUG.reloadBackroundPage = function() {\n    chrome.runtime.sendMessage({tabid: INFO.tabid, method:\"ReloadBackroundPage\"});\n  };\n    \n  DEBUG.showSeaJsCache = function() {\n    chrome.runtime.sendMessage( {tabid: INFO.tabid, method:\"ExecuteJsCodeOrFile\", data:[\n       { code: ` console.log(\"seajs.cache:\", seajs.cache);`}]\n    } );\n  };\n    \n  DEBUG.viewMessenger = function() {\n    chrome.runtime.sendMessage( {tabid: INFO.tabid, method:\"ExecuteJsCodeOrFile\", data:[\n       { code: ` console.log(\"#Messenger:\", require(\"#Messenger\") );`}]\n    } );\n  };\n    \n  DEBUG.addScriptNode = function(src) {\n    chrome.runtime.sendMessage( {tabid: INFO.tabid, method:\"ExecuteJsCodeOrFile\", data:[\n      { code: ` InjectCodeToOriginalSpace(\"${src}\");`}]\n    } );\n  };\n    \n  DEBUG.injectContentScriptAsScriptNode = function(csName) {\n    chrome.runtime.sendMessage( {tabid: INFO.tabid, \n                                 method:\"InjectContentScriptAsScriptNode\", \n                                 data:JSON.stringify({name:csName}) } );\n  };\n  \n  DEBUG.importContentScript = function(csNames) {\n    csNames.split(/\\s*,\\s*/).filter(function(str) { return str; })\n    .forEach(function(csName) {\n      var objName = csName.replace(/^#/, \"\");\n      objName = objName[0].toLowerCase() + objName.slice(1);\n      run(csName, objName);\n      msgbox.show(objName, \"is exported after importing content script\", csName);\n    });\n  };\n    \n  window.debug = DEBUG;\n  define(\"#DEBUG\", [], DEBUG);\n  \n}) (this);\n",
      "importOnce": false,
      "timestamp": "20160218-121341446",
      "id": "cs-DEBUG"
    },
    "cs-Dev": {
      "name": "Dev",
      "type": "cs",
      "index": "19",
      "group": "Module",
      "title": "Dev",
      "sfile": "",
      "script": "define(\"#Dev\", [\"ready\", \"jquery\", \"#LibBase\", \"#Messenger\"], function(require, exports, module) {\n  var ready = require(\"ready\");\t// ready(callback) registers callback as a DOMDocumentLoaded event listener. Remove it if you do not need it.\n  var $ = require(\"jquery\");\n  var libBase = require(\"#LibBase\");\n  var msg = require(\"#Messenger\");\n  \n  function Dev() {\n    this.init();\n  }\n  Dev.prototype = Object.create(libBase);\n  Dev.prototype.constructor = Dev;\n  \n  /**\n   * Set the value of a CodeMirror editor which is identified by a CSS selector\n   * and an index of the matching DOM element array.\n   *\n   * setValue(cssSelector, index, text)\n   * setValue(cssSelector, text)\t\t\t\t\tindex = 0\n   * setValue(index, text)\t\t\t\t\t\t\t\tcssSelector = \".CodeMirror\"\n   * setValue(text)\t\t\t\t\t\t\t\t\t\t\t\tcssSelector = \".CodeMirror\", index = 0\n   */\n  Dev.prototype.setCodeMirrorText = function(cssSelector, index, text) {\n    var self = this;\n    \n    function onload() {    \n      msg.invokeFunction(\"__JSTricks_Injected_CodeMirror_setValue\", \n                         [cssSelector, index, text], function(ret) {\n        self.showMsg(\"Value is set to CodeMirror editor\");\n      });\n    }\n    msg.injectContentScript(\"CodeMirror_INJ\", onload);\n  };\n  \n  return new Dev();\n});",
      "importOnce": false,
      "timestamp": "20160202-224000202",
      "id": "cs-Dev"
    },
    "cs-HightlightSelector": {
      "name": "HightlightSelector",
      "type": "cs",
      "index": "4",
      "group": "",
      "title": "Hightlight CSS Selector",
      "sfile": "",
      "script": "// Hightlight the node in current webpage that matches the selected string\n// as a jQuery selector.\n\n(function() {\n  console.log(\"-------------------------------\");\n  var text = INFO.contextMenuInfo.selectionText.trim(), selector = text; \n  \n  if (text.startsWith(\"'\") && text.endsWith(\"'\") )\n    selector = text.slice(1,-1).replace(/\\\\'/g, \"'\");\n  else if (text.startsWith('\"') && text.endsWith('\"') )\n    selector = text.slice(1,-1).replace(/\\\\\"/g, '\"');\n  else if (text.startsWith('`') && text.endsWith('`') )\n    selector = text.slice(1,-1).replace(/\\\\`/g, \"`\");\n  else\n    selector = text.replace(/\\\\'/g, \"'\").replace(/\\\\\"/g, '\"');\n  \n  selector = selector.trim();\n   \n  console.log(\"The selected text is\", text, \"and the selector is\", selector);\n  \n  var request = {method: \"NS-HightlightSelectorNode\", tabid:INFO.tabid, selector:selector};\n  \n  run([\"nodeSelector\"], function(handler) {\n    handler.handleMessages(request);\n  });\n  \n}) ();\n",
      "importOnce": false,
      "timestamp": "20160202-234546486",
      "id": "cs-HightlightSelector"
    },
    "cs-InjectAsScriptNode_Demo": {
      "group": "Demo",
      "title": "InjectAsScriptNode_Demo",
      "sfile": "",
      "script": "run([\"#Messenger\"], function( msg) {\n  // Inject \n  var csName = \"InjectAsScriptNode_Injected\";\n  var funcName = \"__JSTricks_Injected_Test_func1\";\n  console.log(\"--------------------------------\");\n  console.log(\"Start to inject content script as script node to DOM tree:\", csName);\n  msg.injectContentScript(csName, function() {\n    console.log(\"In extension frame:\", csName, \"content script is loaded.\");\n  \n    msg.invokeFunction(funcName, [1, 2], function(ret) {\n      console.log(\"Returned value is\", ret);\n    });\n  });\n    \n});\n",
      "id": "cs-InjectAsScriptNode_Demo",
      "type": "cs",
      "name": "InjectAsScriptNode_Demo",
      "timestamp": "20160202-224000202",
      "importOnce": false,
      "autostart": false
    },
    "cs-InjectAsScriptNode_Injected": {
      "group": "Demo",
      "title": "InjectAsScriptNode_Injected",
      "sfile": "",
      "script": "\n\n// Function starts with __JSTricks_Injected_ will be called by injected/injected.js (a built-in script)\n// when a message is posted by other frames or website calling\n// window.postMessage({ type: \"JST-callMethod\", func: \"enableRightClick\" }, \"*\");\nfunction __JSTricks_Injected_Test_func1(arg1, arg2) {\n  console.log(\"__JSTricks_Injected_Test_func1 in Test is invoked with arguments\", arguments);\n  return \"RETURN VALUE of arg1 + arg2 =\" + (arg1 + arg2);\n}\n\nconsole.log(\"Print a message. INFO is an object in extension frame, but it does not exisit in the top frame. INFO=\");\nconsole.log(INFO);",
      "id": "cs-InjectAsScriptNode_Injected",
      "type": "cs",
      "name": "InjectAsScriptNode_Injected",
      "timestamp": "20160202-224000202",
      "importOnce": false,
      "autostart": false
    },
    "cs-LibBase": {
      "name": "LibBase",
      "type": "cs",
      "index": "19",
      "group": "Lib",
      "title": "LibBase",
      "sfile": "",
      "script": "define(\"#LibBase\", [\"msgbox\"], function(require, exports, module) {\n  var msgbox = require(\"msgbox\");\n//   var msgbox = chrome.extension ? window.msgbox : \n//                window.msgbox_02510e5e_ac1d_4f71_b376_92d5fba1437c;\n//   var ready  = chrome.extension ? window.ready : \n//                window.ready_f128a08a_c284_4a1b_82ac_db46c31d4fa5;\n//   var UTIL   = chrome.extension ? window.UTIL : \n//                window.UTIL_dad28be6_ead8_4d79_87bf_6fd217f27d6d;\n//   var INFO = chrome.extension ? window.INFO : \n//              window.INFO_cb8e4309_b9cf_44ad_95d1_b570a913ccd9;\n  \n  function LibBase() {\n    this.classname = \"LibBase\";\n    \n    this.state = {};\n    this.hotkeys = null;\n    \n    this.isMacOS = navigator.userAgent.indexOf(\"Mac OS\") > -1;\n  }\n  \n  LibBase.prototype.init = function() {  \n    this.classname = this.constructor.name;\n    \n    // 2 extra stack trace level: LibBase.log/showMsg/showMsgRaw, and _callMsgboxMethod\n  \tmsgbox = msgbox.clone(this.classname, 2); \n    this.config = this.getConfig(this.classname);\n  };\n  \n  \n  /** \n   * Log and ShowMessage with msgbox\n   */\n  LibBase.prototype.log = function() {\n    _callMsgboxMethod(this, \"log\", arguments);\n  };\n  \n  LibBase.prototype.showMsgRaw = function() {\n  \t//msgbox.showRaw.apply(msgbox, arguments);\n    _callMsgboxMethod(this, \"showRaw\", arguments);\n  };\n  \n  LibBase.prototype.showMsg = function() {\n  \t//msgbox.show.apply(msgbox, arguments);\n    _callMsgboxMethod(this, \"show\", arguments);\n  };\n  \n  LibBase.prototype.getConfig = function(name) {\n    var storageName = \"$setting.libconfig-\" + name;\n    if (!localStorage[storageName]) {\n      localStorage[storageName] = {};\n    }\n    \n    return localStorage[storageName];\n  };\n  \n  LibBase.prototype.triggerCustomEvent = function(name, data) {\n    var e = document.createEvent(\"CustomEvent\");\n    e.initCustomEvent(name, true, true, data);\n    document.dispatchEvent(e);\n  };\n  \n  function _callMsgboxMethod(self, methodName, args) {\n  \tmsgbox[methodName].apply(msgbox, args);\n  }\n  \n  \n  /** \n   * Resister a hot key\n   * @param node The DOM node on which the keypress event listener is registered.\n   * @param hotkey, hot key to be registered. The connection char can be + or -.\n   *        For exmaple, Ctrl-Q, Cmd+Alt+A.\n   * @param ctrlToMetaOnMac A boolean value. If it is set to true, then the Ctrl modifier \n   *        in the hot key will be changed to Command on MacOS.\n   * @param handler The event handler for the hotkey's keypress event\n   */\n  LibBase.prototype.registerHotkey = function(node, hotkey, ctrlToCmdOnMac, handler) {\n    var self = this;\n    if (!this.hotkeys) {\n      this.hotkeys = {};\n    \tnode.addEventListener(\"keyup\", _getOnKeyPressed(this), false);\n    }\n    var modifiers = {ctrlKey:false, altKey:false, shiftKey:false, metaKey:false};\n    hotkey = hotkey.toLowerCase();\n    [\"ctrl\", \"alt\", \"shift\", \"meta\"].forEach(function(modifier) {\n      var modifierStr = modifier.replace(/\\b(Cmd|Command)\\b/gi, \"meta\");\n      var modifierRegexp = new RegExp(\"\\\\b\" + modifierStr + \"\\\\b\", \"i\");\n      if (modifierRegexp.test(hotkey)) {\n        if (modifier === \"ctrl\") {\n          if (self.isMacOS && ctrlToCmdOnMac)\n            modifiers.metaKey = true;\n          else\n            modifiers.ctrlKey = true;\n        } else {\n          modifiers[modifierStr + \"Key\"] = true;\n        }\n      }\n    });\n    this.hotkeys[hotkey] = {modifiers:modifiers, code:_getKeyCode(hotkey), handler:handler};\n  };\n  \n  function _getKeyCode(hotkey) {\n    var keycode = null, key = hotkey.toLowerCase().split(/\\+|-/).slice(-1)[0];\n    if (key.length == 1) {\n      if (key >= '0' && key <= \"9\")\n        keycode = \"Digit\" + key;\n      else if (key >= 'a' && key <= \"z\")\n        keycode = \"Key\" + key.toUpperCase();\n    }\n    \n    if (keycode == null) {\n      keycode = key;\n    }\n    \n    return keycode;\n  }\n  \n  function _getOnKeyPressed(self) {\n    return function (event) {\n      //self.showMsg(\"Keypressed\", event.which, event);\n      for (var hotkey in self.hotkeys) {\n        var hotkeyinfo = self.hotkeys[hotkey];\n        var code = hotkeyinfo.code;\n        if (code !== event.code)\n          continue;\n        \n        var modifierMatches = true;\n        for (var modifierKey in hotkeyinfo.modifiers) {\n          if (event[modifierKey] !== hotkeyinfo.modifiers[modifierKey]) {\n            modifierMatches = false;\n            break;\n          }\n        }\n        \n        if (modifierMatches) {\n        \thotkeyinfo.handler(event);\n        }\n      }\n    };\n  }\n  \n  \n  /** \n   * Injecting CSS styles\n   */\t\n\tLibBase.prototype.appendStyle = function (id, styles) {\n\t\tid = 'javascript-tricks-' + id;\n\t\tvar os = document.getElementById(id);\n\t\tif (os) {\n\t\t\tos.parentNode.removeChild(os);\n\t\t}\n\t\t\n\t\tvar s = document.createElement('style');\n\t\ts.setAttribute('type', 'text/css');\n\t\ts.setAttribute('id', id);\n\t\ts.innerHTML = this.decorateStyleWithImportant(styles);\n\t\t//(document.body||document.documentElement).appendChild(s);\n\t\t//document.documentElement.insertBefore(s, document.documentElement.childNodes[1]);\n\t\tdocument.documentElement.appendChild(s);\n\t};\n  \n\tLibBase.prototype.decorateStyleWithImportant = function (styles) {\n\t\treturn styles.replace(/(\\S)(\\s*)(\\/\\*[\\s\\S]*?\\*\\/)?(\\s*\\})/g, function(s, g1, g2, g3, g4) {\n\t\t\t\t\t\tif (g1==\";\")\n\t\t\t\t\t\t\treturn s;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\treturn g1+\";\"+g2+(g3?g3:\"\")+g4;\n\t\t\t\t\t})\n\t\t\t\t\t.replace(/;/g, \" !important;\");\n\t};\n  \n  return new LibBase();\n});\n\n",
      "importOnce": false,
      "timestamp": "20160218-142813888",
      "id": "cs-LibBase"
    },
    "cs-Messenger": {
      "name": "Messenger",
      "type": "cs",
      "index": "12",
      "group": "Lib",
      "title": "Messenger",
      "sfile": "",
      "script": "define(\"#Messenger\", [], function(require, exports, module) {\n  // An instance\n  var messenger = null;\n  var global = this;\n  var port = chrome.runtime.connect();\n  \n  function Messenger() {\n    this.funcCallback = {};\n    this.scriptCallback = {};\n    this.domain = null;\n    \n    this.init();\n  }\n  \n  Messenger.prototype.init = function() {\n    // Get domain of current page\n    var domainMatch = location.href.match(/^[\\w-]+:\\/*\\[?([\\w\\.:-]+)\\]?(?::\\d+)?/); \n    this.domain = domainMatch ? domainMatch[0] : \"\";\n    \n    // register on message posted event handler\n    window.addEventListener(\"message\", function(event) {\n      //console.log(\"Message received in Messenger\", event, \". Current domain is\", messenger.domain);\n      var returnValue, callback;\n      \n      // We only accept messages from current page\n      if (!event.data || event.origin != messenger.domain)\n        return;\n      \n      // invoked when injected/injected.js send a message after invoked function returns\n      else if (event.data.type == \"JST-injected-callMethodResponse\") {\n        //console.log(\"Messenger get response from function\", event.data.func);\n        \n        if (event.data.callback) {\n          try { returnValue = JSON.parse(event.data.returnValue); } catch (ex) {}\n          callback = messenger.funcCallback[event.data.callback];\n          callback.call(global, returnValue);\n          \n          delete messenger.funcCallback[event.data.callback];\n        }\n      }\n      \n      // \n      else if (event.data.type == \"JST-callMethod\") {\n        //console.log(\"Messenger get response from function\", event.data.func);\n        \n        if (event.data.callback) {\n          try { returnValue = JSON.parse(event.data.returnValue); } catch (ex) {}\n          callback = messenger.funcCallback[event.data.callback];\n          callback.call(global, returnValue);\n          \n          delete messenger.funcCallback[event.data.callback];\n        }\n      }\n    \n      // UNUSED\n      else if (event.data.type == \"FROM_PAGE\") {\n        console.log(\"Content script function invocation request received: \" + event.data.text);\n        console.log(event);\n        port.postMessage(event.data.text);\n      }\n    }, false);\n  };\n  \n  Messenger.prototype.guid = function() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n      return v.toString(16);\n    });\n  };\n    \n  Messenger.prototype.loadScript = function(srcHref) {\n    chrome.runtime.sendMessage( {tabid: INFO.tabid, method:\"ExecuteJsCodeOrFile\", data:[\n      { code: ` InjectCodeToOriginalSpace(\"${srcHref}\");`}]\n    } );\n  };\n  \n  Messenger.prototype.injectSrcCode = function(srcCode, callback) {\n    var callbackID = this.guid(), msgData = {code:srcCode};\n    if (callback) {\n      this.scriptCallback[callbackID] = callback;\n      msgData.callback = callbackID;\n    }\n    chrome.runtime.sendMessage( \n      {tabid: INFO.tabid, method:\"InjectContentScriptAsScriptNode\", \n       data:JSON.stringify(msgData) } );\n  };\n  \n  Messenger.prototype.injectContentScript = function(csName, callback) {\n    var callbackID = this.guid(), msgData = {name:csName};\n    if (callback) {\n      this.scriptCallback[callbackID] = callback;\n      msgData.callback = callbackID;\n    }\n    chrome.runtime.sendMessage( \n      {tabid: INFO.tabid, method:\"InjectContentScriptAsScriptNode\", \n       data:JSON.stringify(msgData) } );\n  };\n  \n  Messenger.prototype.onScriptLoaded = function(callbackID) {\n    if (callbackID) {\n      //console.log(\"Script is loaded, callback id is:\", callbackID, \"and all script callback is\", this.scriptCallback);\n      var callback = this.scriptCallback[callbackID];\n      callback.call(global);\n      \n      delete this.scriptCallback[callbackID];\n    }\n  };\n  \n  // args should be an array, and returnCallback is a function taking one argument.\n  Messenger.prototype.invokeFunction = function(funcName, args, returnCallback) {\n    if (!funcName.startsWith(\"__JSTricks_Injected_\"))\n      throw new Error(\"Function name has to start with __JSTricks_Injected_\");\n\n    var msg = {type: \"JST-injected-callMethod\", func:funcName}; \n    \n    if (!args) {\n      args = [];\n    }\n    msg.args = JSON.stringify(args);\n    \n    if (returnCallback) {\n      var callbackID = this.guid();\n      msg.callback = callbackID;\n      this.funcCallback[callbackID] = returnCallback;\n    }\n    \n    window.postMessage(msg, this.domain);\n  };\n  \n  \n  // Export symbols\n  messenger = new Messenger();\n  window.__JSTricks_Messenger = messenger;\n  \n  return messenger;  \n});",
      "importOnce": false,
      "id": "cs-Messenger",
      "autostart": false,
      "timestamp": "20160202-224000202"
    },
    "cs-OpenLinks": {
      "name": "OpenLinks",
      "type": "cs",
      "index": "4",
      "group": "",
      "title": "Open Selected Links",
      "sfile": "",
      "script": "(function() {\n\tvar h;\n\th = [/^mailto\\:/i, /^javascript/i];\n\tvar j = window,\n\tf = function(b, a) {\n\t\tthis.html = b;\n\t\tthis.selection = a;\n\t\tthis.links = {};\n\t};\n\tf.fromSelection = function(b) {\n\t\tvar a, c, e, d, g;\n\t\ta = function(a, b, c) {\n\t\t\treturn a.appendChild(b.getRangeAt(c).cloneContents());\n\t\t};\n\t\tc = document.createElement(\"div\");\n\t\te = d = 0;\n\t\tfor (g = b.rangeCount; 0 <= g ? d < g: d > g; e = 0 <= g ? ++d: --d) a(c, b, e);\n\t\treturn new f(c, b.toString());\n\t};\n\tf.fromHTMLString = function(b) {\n\t\tvar a;\n\t\ta = document.createElement(\"div\");\n\t\ta.innerHTML = b;\n\t\treturn new f(a, a.innerText);\n\t};\n\tf.prototype.allLinks = function() {\n\t\tthis.gatherHTMLLinks();\n\t\tthis.gatherPlainLinks();\n\t\treturn this.createLinkList();\n\t};\n\tf.prototype.gatherHTMLLinks = function() {\n\t\tvar b, a, c, e, d;\n\t\tb = this.html.getElementsByTagName(\"a\");\n\t\td = [];\n\t\tc = 0;\n\t\tfor (e = b.length; c < e; c++) a = b[c],\n\t\ta.href && !this.onBlackList(a.href) && d.push(this.links[a.href] = !0);\n\t\treturn d;\n\t};\n\tf.prototype.onBlackList = function(b) {\n\t\tvar a,\n\t\tc,\n\t\te;\n\t\tc = 0;\n\t\tfor (e = h.length; c < e; c++) if (a = h[c], b.match(a)) return ! 0;\n\t\treturn ! 1;\n\t};\n\tf.prototype.gatherPlainLinks = function() {\n\t\tvar b, a, c, e, d;\n\t\tif (a = this.selection.match(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig)) {\n\t\t\td = [];\n\t\t\tc = 0;\n\t\t\tfor (e = a.length; c < e; c++) b = a[c],\n\t\t\td.push(this.links[b] = !0);\n\t\t\treturn d;\n\t\t}\n\t};\n\tf.prototype.createLinkList = function() {\n\t\tvar b, a;\n\t\ta = [];\n\t\tfor (b in this.links) a.push(b);\n\t\treturn a;\n\t};\n\tj.LinkGrabber = f;\n  \n  \n    var allLinks = LinkGrabber.fromSelection(window.getSelection()).allLinks();\n    if(confirm(\"Open \" + allLinks.length + \" in new tabs?\")) {\n      for (var i = 0; i < allLinks.length; ++i) {\n        window.open(allLinks[i]);\n      }\n    } \n}).call(this);\n\n",
      "importOnce": false,
      "id": "cs-OpenLinks",
      "timestamp": "20160202-224000203"
    },
    "cs-PluginDemo": {
      "name": "PluginDemo",
      "type": "cs",
      "index": "14",
      "group": "Demo",
      "title": "Plugin Demo",
      "sfile": "PluginDemo_lib",
      "script": "/* globals a */\nmsgbox.log(\"efef\", a);",
      "importOnce": false,
      "timestamp": "20160212-175320233",
      "id": "cs-PluginDemo"
    },
    "cs-Plugins": {
      "name": "Plugins",
      "type": "cs",
      "index": "17",
      "group": "Plugins",
      "title": "Plugins",
      "sfile": "",
      "script": "/******************************************************************************\n *               This file is mainly used in Top-Frame Plugins                *\n *                                                                            *\n * This script defines function that will be invoked in lots of website as    *\n * plugins. In order to reduce memory usage, it should be avoided to openning *\n * the background page (an event page), which may result from sending message *\n * to the background page with chrome.runtime.sendMessage to load scripts     *\n * from database.                                                             *\n * Thus this script as a Top-Frame plugin script should not depends on other  *\n * content scripts.                                                           *   \n * Note: if a plugin is tested against a CSS selector condition, then it is   *\n *       loaded on window.onload event (after a delay defined in the plugin). *\n *       Otherwise, it is loaded on onDOMContentLoaded event.                 *\n ******************************************************************************/\n\n(function() {\n  var msgbox = chrome.extension ? window.msgbox : \n               window.msgbox_02510e5e_ac1d_4f71_b376_92d5fba1437c;\n  var ready  = chrome.extension ? window.ready : \n               window.ready_f128a08a_c284_4a1b_82ac_db46c31d4fa5;\n  var UTIL   = chrome.extension ? window.UTIL : \n               window.UTIL_dad28be6_ead8_4d79_87bf_6fd217f27d6d;\n  var INFO = chrome.extension ? window.INFO : \n             window.INFO_cb8e4309_b9cf_44ad_95d1_b570a913ccd9;\n  \n  var plugins = {};\n  msgbox = msgbox.clone(\"Plugins\");\n  \n  plugins.adjustHeightForCYE = function (delay) {\n    delay = delay != undefined ? delay : 500;\n    function doAction() {\n      var height = window.getComputedStyle(document.body, null).height; //document.body.scrollHeight + \"px\";\n      document.getElementById(\"cye-workaround-body\").style.height = height + \"px\";\n      document.getElementById(\"cye-workaround-body-image\").style.height = height;\n    \n      msgbox.log(\"Height is adjusted for Care-Your-Eyes extension, height=\", height);\n    }\n    if (delay == 0)\n      doAction();\n    else\n    \tsetTimeout(doAction, delay);\n    \n    document.addEventListener('DOMNodeInserted', doAction, true);\n    document.addEventListener('DOMAttrModified', doAction, true);\n    document.addEventListener('DOMNodeRemoved', doAction, true);\n    // this is a custom event\n    document.addEventListener(\"Height_Updated\", doAction, true);\n  };\n  \n  plugins.test = function() {\n  \tmsgbox.log(\"test\");\n  };\n  \n  // Export symbol\n  window.JSTricks_plugins = plugins;\n  if (window.define)\n  \tdefine(\"#Plugins\", [], plugins);\n  \n}) ();",
      "importOnce": false,
      "timestamp": "20160203-00020076",
      "id": "cs-Plugins"
    },
    "cs-QRCodeDecode": {
      "group": "",
      "title": "Decode QRCode",
      "sfile": "",
      "script": "run([\"jquery\"], function($) {\n  var contextInfo = INFO.contextMenuInfo;\n  console.log(contextInfo);\n  if (/http:\\/\\//.test(location.href)) {\n    if (contextInfo.mediaType == \"image\") {\n      alert(\"Decoding QR code image \\n\" + contextInfo.srcUrl);\n    \n      $.post(\n        \"http://cli.im/Api/Browser/deqr\", \n        {\"data\":contextInfo.srcUrl}, \n        function (response) {\n          console.log(response);\n          if (response.status == 1) {\n            if (confirm(\"The scan result is\\n\" + response.data.ScanResult + \"\\n\\nDo you want to open it in new tab?\")) {\n              window.open(response.data.ScanResult);\n            }\n          } else {\n            alert(response.data);\n          }\n      });\n    } else {\n      alert(\"No image selected. \\nPlease right click on a QRCode image.\");\n    }\n  } else if (/https:\\/\\//.test(location.href)) {\n    var win = window.open('http://cli.im/deqr/', 'qrcode-window');\n    \n    win.document.onload = function() {\n      console.log(\"hello\");\n    };\n    \n  } else {\n    alert(\"Can only decode images in http:// or https:// schema.\");\n  }\n});",
      "id": "cs-QRCodeDecode",
      "type": "cs",
      "name": "QRCodeDecode",
      "timestamp": "20160202-224000203",
      "importOnce": false,
      "autostart": false
    },
    "cs-QRCodeEncode": {
      "group": "",
      "title": "Encode QRCode",
      "sfile": "",
      "script": "(function() {\n\tfunction getSelected() {\n\t\tif (window.getSelection) {\n\t\t\treturn window.getSelection();\n\t\t} else if (document.getSelection) {\n\t\t\treturn document.getSelection();\n\t\t} else if (document.selection) {\n\t\t\treturn document.selection.createRange().text;\n\t\t}\n\t\treturn false;\n\t}\n\tvar selection = getSelected();\n\tif (!selection || selection == '') selection = window.location.href;\n\telse selection = encodeURIComponent(selection);\n\twindow.open('http://qr.liantu.com/api.php?text=' + selection);\n})();",
      "id": "cs-QRCodeEncode",
      "type": "cs",
      "name": "QRCodeEncode",
      "timestamp": "20160202-224000203",
      "importOnce": false
    },
    "cs-localStorage": {
      "group": "util",
      "title": "Local Storage Backup and Restore",
      "sfile": "",
      "script": "run([\"jquery\", \"jquery-ui\"], function($) {\n  start();\n  \n  function start() {\n\tcreateAndShowDialog();\n\t\n\tfunction createAndShowDialog() {\n\t\tconsole.log('Create and show dialog');\n\t\tcreateDialog();\n\t\tshowDialog();\n\t}\n\t\n\tfunction createDialog() {\n\t\tvar path = \"D:/<百度云同步盘路径>/Util/ChromeExtConfig\";\n\t\tif (navigator.userAgent.indexOf('Macintosh') >= 0)\n\t\t\tpath = \"/Volumes/MacData/Users/zhiyuangong/BaiduCloud/百度云同步盘/Util/ChromeExtConfig\";\n\t\t\t\n\t\t$('body').append('<div id=\"__UI_dialog__DIV\" title=\"Local Storage Backup and Restore\">'+\n\t\t\t'<input id=\"__UI_dialog__backup\" type=\"button\" value=\"Backup\" />'+\n\t\t\t'<a id=\"__UI_dialog__link\" download=\"backup.json\" style=\"display:none\">Download</a><hr/>'+\n\t\t\t'Local storage backup file: '+\n\t\t\t'<input id=\"__LocalStorageFP__\" type=\"file\" />'+\n\t\t\t'<input id=\"__UI_dialog__restore\" type=\"button\" value=\"Restore\" />'+\n\t\t'</div>');\n\t\t\n\t\twindow.__UI_dialog__ = $('#__UI_dialog__DIV').dialog({\n\t\t\tautoOpen: false, width: 450, modal: true\n\t\t});\n\t\t$('#__UI_dialog__backup').click(backup);\n\t\t$('#__UI_dialog__restore').click(restore);\n\t\t\n\t\tconsole.log('Dialog created');\n\t}\n\t\n\tfunction showDialog() {\n\t\tconsole.log('Show dialog');\n\t\twindow.__UI_dialog__.dialog('open');\n\t}\n\t\n\tfunction backup() {\n\t\tvar data = JSON.stringify(localStorage);\n\t\tvar link = $('#__UI_dialog__link');\n\t\tlink.attr('href', \"data:text/plain;charset=UTF-8,\"+encodeURIComponent(data));\n\t\tlink.attr('data-downloadurl', \"text/plain:backup.json:\"+\"http://html5-demos.appspot.com/static/a.download.html\");\n\t\tlink.innerHtml = \"Download\";\n\t\tlink.show();\n\t}\n\t\n\tfunction restore() {\n\t\tvar file = $('#__LocalStorageFP__')[0].files[0];\n\t\tvar reader = new FileReader();\n\t\treader.onload = function() {\n\t\t\tvar text = this.result;\n\t\t\tconsole.log(text);\n\t\t\tvar values = JSON.parse(text);\n\t\t\tfor (var v in values) {\n\t\t\t\tlocalStorage[v] = values[v];\n\t\t\t\t/*console.log(v+\"=\"+values[v]);*/\n\t\t\t}\n\t\t};\n\t\treader.readAsText(file);\n\t}\n  }\n});",
      "id": "cs-localStorage",
      "type": "cs",
      "name": "localStorage",
      "timestamp": "20160202-224000204",
      "importOnce": false,
      "autostart": false
    },
    "dss-Main": {
      "script": "// Configuration of seajs is moved into meta data.\n/*\nseajs.config({\n  base: \"../sea-modules/\",\n  \"alias\": {\n    \"jquery\": \"jquery.sea.js\",\n    \"jquery-ui\": \"jquery-ui.js\",\n  }\n});\n*/",
      "autostart": false,
      "sfile": "",
      "css": "",
      "id": "dss-Main",
      "type": "dss",
      "name": "Main",
      "timestamp": "20160202-224000204"
    }
  },
  "props": {
    "DEBUG": "false",
    "enabled": "true",
    "startuptab": "0",
    "theme": "automatic",
    "theme_day": "_yellow",
    "theme_night": "dark",
    "theme_nightStartTime": "18:00",
    "theme_nightEndTime": "06:30",
    "popupwindow_genUIPanelMaxHeight": "164",
    "popupwindow_pinnedWindowHeight": "632",
    "popupwindow_disableRunCodeButton": "false",
    "popupwindow_displayRequiresField": "false",
    "sitescripts_showMainScript": "false",
    "contentcripts_generateComments": "true",
    "cmeditor_rightcolumnWidth": "150",
    "outline_showAnonymousFunctions": "false",
    "builtin_msgboxShowStacktrace": "false",
    "builtin_msgboxDisplayTime": "3750",
    "builtin_msgboxPosition": "1",
    "builtin_msgboxWidth": "500px",
    "builtin_msgboxOpacity": "0.8",
    "builtin_msgboxBgColor": "#F7DF1D",
    "builtin_msgboxExtraStyles": "border:1px solid #937B13;",
    "builtin_selectionboxEdgeSize": "3",
    "builtin_selectionboxEdgeColor": "#65F166",
    "backup-readable": "false",
    "misc_refreshOnSaveAnOption": "false",
    "misc_refreshOnSaveAllOptions": "true",
    "DEBUG_runbuttoncode": "false",
    "DEVMODE": "false"
  }
}